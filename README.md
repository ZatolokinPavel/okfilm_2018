Сайт [okfilm.com.ua](http://okfilm.com.ua/) для Оксаны
=========================================================
Версия 2018 года. Вторая версия, уже с собственным дизайном.

Сайт написан используя только html/css/js и заточен на работу с Nginx. Конфиг для Apache есть, но он годится только для запуска на локалке.
Для удобства разработки используется технология SSI (Server Side Include) в качестве примитивного шаблонизатора. Чтобы включить поддержку SSI на Apache, необходимо подключить модуль *mod_include* и добавить в инструкцию `DirectoryIndex` поиск файлов `index.shtml`.

## Настройка и запуск
Для работы сайта необходимо:
- скачать этот проект в директорию `/srv`;
- закинуть папку `cdn` с компа в директорию `/srv`;
- создать папку `/srv/logs` для логов ошибок Content Security Policy;
- скачать [конфиги nginx](https://github.com/ZatolokinPavel/nginx) также в директорию `/srv` и подключить их к nginx как описано в проекте с конфигами.

Кроме того, предполагается наличие папки `/srv/shared-global` у которой открыты права на чтение и запись для всех. Это будет папка для загрузки файлов, которые смогут скачивать клиенты, перейдя по предоставленной им ссылке.

## Подготовка фотографий для портфолио
Чтобы подготовить фотографии для портфолио, создаём экшен в фотошопе, который включает в себя следующие стадии:  
1. Вызов сценария "Большое фото в галерею сайта" ([скачать](/utilities/Photoshop/%D0%91%D0%BE%D0%BB%D1%8C%D1%88%D0%BE%D0%B5%20%D1%84%D0%BE%D1%82%D0%BE%20%D0%B2%20%D0%B3%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D1%8E%20%D1%81%D0%B0%D0%B9%D1%82%D0%B0.jsx));
2. Обрезка фото с соотношением сторон 23x20 (инструмент "Рамка");
3. Вызов сценария "Маленькие превью в галерею сайта" ([скачать](/utilities/Photoshop/%D0%9C%D0%B0%D0%BB%D0%B5%D0%BD%D1%8C%D0%BA%D0%B8%D0%B5%20%D0%BF%D1%80%D0%B5%D0%B2%D1%8C%D1%8E%20%D0%B2%20%D0%B3%D0%B0%D0%BB%D0%B5%D1%80%D0%B5%D1%8E%20%D1%81%D0%B0%D0%B9%D1%82%D0%B0.jsx));
4. Закрыть файл без сохранения.

Причём для второго шага (рамка) в экшене включена опция "открытие деалогового окна". Так что, при обработке фоток, обрезка для каждой фотки задаётся вручную. Это позволяет сделать красиво кадрированные миниатюры без отсечения голов.  

После создания экшена, он ставится на выполнение через меню "Файл / Автоматизация / Пакетная обработка". В диалоговом окне задаётся экшен, папка с фотками и опции как на скриншоте. В результате выполнения экшена фотки в папке заменяются на сжатые до размера 1200 px по широкой стороне. Так что оригиналы нужно сохранить отдельно. А также создаются миниатюры размером 345x300 px для экранов с разной протностью пикселей.  
<img src="/utilities/Photoshop/Photoshop_action.png">  
После выполнения скрипта, нужно ещё раз загрузить оригинал титульной фотки, которая отображается на странице http://okfilm.com.ua/photo, обрезать её так же, как и уже созданная миниатюра, и вызвать сценарий "preparingImagesForSite" ([скачать](/utilities/Photoshop/preparingImagesForSite.jsx)). В диалоговом окне нужно указать размер "230". В результате будут созданы миниатюры 230x200 px для экранов мобильных устройств. Эти миниатюры нужно положить в ту же папку, что и основные фотки с миниатюрами.  
